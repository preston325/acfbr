services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    image: acfbr-app:latest  # Optional: explicit image name
    container_name: acfbr-app
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: postgresql://postgres:Snoqualmie2015%21@tdpllc-1.cqgd5zbaiuii.us-west-2.rds.amazonaws.com:5432/acfbr?sslmode=require
      NODE_TLS_REJECT_UNAUTHORIZED: 0
      JWT_SECRET: ${JWT_SECRET:-your-secret-key-change-in-production}
      SPORTSDB_API_KEY: ${SPORTSDB_API_KEY:-428457}
      NODE_ENV: development
      SMTP_HOST: ${SMTP_HOST:-smtp-relay.brevo.com}
      SMTP_PORT: ${SMTP_PORT:-587}
      SMTP_USER: ${SMTP_USER:-}
      SMTP_PASSWORD: ${SMTP_PASSWORD:-}
      SMTP_FROM: ${SMTP_FROM:-americas.cfb.rankings@gmail.com}
      APP_URL: ${APP_URL:-http://localhost:3000}
    volumes:
      - .:/app
      - /app/node_modules
      - /app/.next
